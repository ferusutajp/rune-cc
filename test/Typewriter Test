--ferusuta is the goat <3
--Variables
local Player = game.Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

local StarterGui = game:GetService("StarterGui")
local PlayerGui = Player:WaitForChild("PlayerGui")
local UIS = game:GetService("UserInputService")

--Sound Service
local SoundService = game:GetService("SoundService")
local DialogueSound = SoundService:WaitForChild("DialogueSound")

--Ui Setup
local TestDialogue = PlayerGui:WaitForChild("TestDialogue")
local DialogueFrame = TestDialogue:WaitForChild("DialogueFrame")
local DialogueText = DialogueFrame:WaitForChild("DialogueText")

--NPC Setup
local NPC = workspace:WaitForChild("TestNPC")
local TestClickDetector = NPC:WaitForChild("ClickDetector")

--Functionality
local DialougeOpen = false
local DialogueStage = 0

local function typeText(text)
    DialogueText.Text = ""
    for i = 1, #text do
        DialogueText.Text = string.sub(text, 1, i)
        DialogueSound:Play()
        wait(0.05)
    end
end

TestClickDetector.MouseClick:Connect(function()
    if DialougeOpen then return end
    elseif DialougeOpen == false then
        if DialogueStage == 0 then
        DialougeOpen = true
        TestDialogue.Enabled = true
        DialogueFrame.Visible = true
        DialogueStage = 1
        DialogueText.Text = ""
        typeText("Test dialogue / typewriter function")
        end
    end
end)